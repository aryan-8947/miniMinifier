<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>CSS Mini Minifier</title>
    <style>
      /* Minifier's style */
      * { margin: 0; padding: 0; }
      h1 { margin: 5px; }
      h3 span { color: #a00; border-bottom: 1px dotted #a00; cursor: pointer; }
      h4 { text-align: left; }
      h4 span { float: right; }
      html { background: #abcdef; font: normal 14px Calibri, Arial; }
      body { width: 850px; margin: 20px auto; padding: 20px; text-align: center; background: #def; }
      input { margin: 2px; }
      textarea { width: 830px; height: 200px; font: normal 11px monospace; letter-spacing: -1px; border: 1px solid #000; padding: 10px; word-wrap: break-word; }
      button { padding: 5px; }
      div { text-align: left; }
      pre { height: 150px; font-size: 12px; text-align: left; font-family: monospace; background: #fff; border: 1px solid #000; padding: 10px; }
    </style>
  </head>
  <body>
    <h1>CSS Mini Minifier v0.4</h1>
    <h3>The Insanely Short <span id=bytes title="size of the minifying expression, the surrounding function is not included">(89 bytes)</span> CSS Minifier Written in JavaScript!</h3>
    <br>
    <br>
    <h4>CSS code:</h4>
    <br>
    <textarea id=css spellcheck="false"></textarea>
    <h4><span>Try <a href="javascript:;" id=ex1>Normalize.css</a> or <a href="javascript:;"id=ex2>miniMinifier test file</a> !</span></h4>
    <br>
    <br>
    <h4>Minifier's JS code:</h4>
    <br>
    <pre id=js>css=(function(c,r){
  return c[r="replace"](/((\/\*[^]*?\*\/)|\s)+/g,' ')[r](/^ | $|[ ;]*([{};,:!+>~\(\)-@]) */g,'$1')
})(css)</pre>
    <br>
    <h4>Options</h4>
    <br>
    <div>
      - <input type=checkbox checked disabled> Remove unnecessary comments, spaces, tabs, line breaks and semicolons</input>
      <br>
      - <input type=checkbox id=zero> Remove 0 in decimal numbers between -1 and 1 (example: 0.25 &rarr; .25)</input>
      <br>
      - <input type=checkbox id=unit> Remove units after 0 (example: 0px &rarr; 0)</input>
      <br>
      - <input type=checkbox id=rgb> Convert rgb colors in hexadecimal (example: rgb(10,20,30) &rarr; #0A151F)</input>
      <br>
      - <input type=checkbox id=hex> Minify hexadecimal colors (example: #556677 &rarr; #567)</input>
      <br>
      - <input type=checkbox id=ie> Old IE compatibility (keep spaces after closing parenthesis, example: "url(bg.jpg) no-repeat")</input>
      <br>
      <br>
    </div>
    <button id=minify>Minify!</button>
    <br>
    <br>
    <br>
    By <a href="http://twitter.com/MaximeEuziere">Maxime Euzi√®re</a> for <a href="http://140byt.es">140byt.es</a> - <a href="http://github.com/xem/miniMinifier">Fork me / See source</a>
    
    <script>
    
      // Reset textarea
      document.getElementById("css").value = "/* Write or paste your CSS here */";
      document.getElementById("ex1").onclick = function(){document.getElementById("css").value = "/*! normalize.css v2.1.0 | MIT License | git.io/normalize */\n\n/* ==========================================================================\n   HTML5 display definitions\n   ========================================================================== */\n\n/**\n * Correct `block` display not defined in IE 8/9.\n */\n\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nnav,\nsection,\nsummary {\n    display: block;\n}\n\n/**\n * Correct `inline-block` display not defined in IE 8/9.\n */\n\naudio,\ncanvas,\nvideo {\n    display: inline-block;\n}\n\n/**\n * Prevent modern browsers from displaying `audio` without controls.\n * Remove excess height in iOS 5 devices.\n */\n\naudio:not([controls]) {\n    display: none;\n    height: 0;\n}\n\n/**\n * Address styling not present in IE 8/9.\n */\n\n[hidden] {\n    display: none;\n}\n\n/* ==========================================================================\n   Base\n   ========================================================================== */\n\n/**\n * 1. Set default font family to sans-serif.\n * 2. Prevent iOS text size adjust after orientation change, without disabling\n *    user zoom.\n */\n\nhtml {\n    font-family: sans-serif; /* 1 */\n    -webkit-text-size-adjust: 100%; /* 2 */\n    -ms-text-size-adjust: 100%; /* 2 */\n}\n\n/**\n * Remove default margin.\n */\n\nbody {\n    margin: 0;\n}\n\n/* ==========================================================================\n   Links\n   ========================================================================== */\n\n/**\n * Address `outline` inconsistency between Chrome and other browsers.\n */\n\na:focus {\n    outline: thin dotted;\n}\n\n/**\n * Improve readability when focused and also mouse hovered in all browsers.\n */\n\na:active,\na:hover {\n    outline: 0;\n}\n\n/* ==========================================================================\n   Typography\n   ========================================================================== */\n\n/**\n * Address variable `h1` font-size and margin within `section` and `article`\n * contexts in Firefox 4+, Safari 5, and Chrome.\n */\n\nh1 {\n    font-size: 2em;\n    margin: 0.67em 0;\n}\n\n/**\n * Address styling not present in IE 8/9, Safari 5, and Chrome.\n */\n\nabbr[title] {\n    border-bottom: 1px dotted;\n}\n\n/**\n * Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome.\n */\n\nb,\nstrong {\n    font-weight: bold;\n}\n\n/**\n * Address styling not present in Safari 5 and Chrome.\n */\n\ndfn {\n    font-style: italic;\n}\n\n/**\n * Address differences between Firefox and other browsers.\n */\n\nhr {\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n    height: 0;\n}\n\n/**\n * Address styling not present in IE 8/9.\n */\n\nmark {\n    background: #ff0;\n    color: #000;\n}\n\n/**\n * Correct font family set oddly in Safari 5 and Chrome.\n */\n\ncode,\nkbd,\npre,\nsamp {\n    font-family: monospace, serif;\n    font-size: 1em;\n}\n\n/**\n * Improve readability of pre-formatted text in all browsers.\n */\n\npre {\n    white-space: pre-wrap;\n}\n\n/**\n * Set consistent quote types.\n */\n\nq {\n    quotes: \"\\201C\" \"\\201D\" \"\\2018\" \"\\2019\";\n}\n\n/**\n * Address inconsistent and variable font size in all browsers.\n */\n\nsmall {\n    font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` affecting `line-height` in all browsers.\n */\n\nsub,\nsup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n}\n\nsup {\n    top: -0.5em;\n}\n\nsub {\n    bottom: -0.25em;\n}\n\n/* ==========================================================================\n   Embedded content\n   ========================================================================== */\n\n/**\n * Remove border when inside `a` element in IE 8/9.\n */\n\nimg {\n    border: 0;\n}\n\n/**\n * Correct overflow displayed oddly in IE 9.\n */\n\nsvg:not(:root) {\n    overflow: hidden;\n}\n\n/* ==========================================================================\n   Figures\n   ========================================================================== */\n\n/**\n * Address margin not present in IE 8/9 and Safari 5.\n */\n\nfigure {\n    margin: 0;\n}\n\n/* ==========================================================================\n   Forms\n   ========================================================================== */\n\n/**\n * Define consistent border, margin, and padding.\n */\n\nfieldset {\n    border: 1px solid #c0c0c0;\n    margin: 0 2px;\n    padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct `color` not being inherited in IE 8/9.\n * 2. Remove padding so people aren't caught out if they zero out fieldsets.\n */\n\nlegend {\n    border: 0; /* 1 */\n    padding: 0; /* 2 */\n}\n\n/**\n * 1. Correct font family not being inherited in all browsers.\n * 2. Correct font size not being inherited in all browsers.\n * 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome.\n */\n\nbutton,\ninput,\nselect,\ntextarea {\n    font-family: inherit; /* 1 */\n    font-size: 100%; /* 2 */\n    margin: 0; /* 3 */\n}\n\n/**\n * Address Firefox 4+ setting `line-height` on `input` using `!important` in\n * the UA stylesheet.\n */\n\nbutton,\ninput {\n    line-height: normal;\n}\n\n/**\n * Address inconsistent `text-transform` inheritance for `button` and `select`.\n * All other form control elements do not inherit `text-transform` values.\n * Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+.\n * Correct `select` style inheritance in Firefox 4+ and Opera.\n */\n\nbutton,\nselect {\n    text-transform: none;\n}\n\n/**\n * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`\n *    and `video` controls.\n * 2. Correct inability to style clickable `input` types in iOS.\n * 3. Improve usability and consistency of cursor style between image-type\n *    `input` and others.\n */\n\nbutton,\nhtml input[type=\"button\"], /* 1 */\ninput[type=\"reset\"],\ninput[type=\"submit\"] {\n    -webkit-appearance: button; /* 2 */\n    cursor: pointer; /* 3 */\n}\n\n/**\n * Re-set default cursor for disabled elements.\n */\n\nbutton[disabled],\nhtml input[disabled] {\n    cursor: default;\n}\n\n/**\n * 1. Address box sizing set to `content-box` in IE 8/9.\n * 2. Remove excess padding in IE 8/9.\n */\n\ninput[type=\"checkbox\"],\ninput[type=\"radio\"] {\n    box-sizing: border-box; /* 1 */\n    padding: 0; /* 2 */\n}\n\n/**\n * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.\n * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome\n *    (include `-moz` to future-proof).\n */\n\ninput[type=\"search\"] {\n    -webkit-appearance: textfield; /* 1 */\n    -moz-box-sizing: content-box;\n    -webkit-box-sizing: content-box; /* 2 */\n    box-sizing: content-box;\n}\n\n/**\n * Remove inner padding and search cancel button in Safari 5 and Chrome\n * on OS X.\n */\n\ninput[type=\"search\"]::-webkit-search-cancel-button,\ninput[type=\"search\"]::-webkit-search-decoration {\n    -webkit-appearance: none;\n}\n\n/**\n * Remove inner padding and border in Firefox 4+.\n */\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n/**\n * 1. Remove default vertical scrollbar in IE 8/9.\n * 2. Improve readability and alignment in all browsers.\n */\n\ntextarea {\n    overflow: auto; /* 1 */\n    vertical-align: top; /* 2 */\n}\n\n/* ==========================================================================\n   Tables\n   ========================================================================== */\n\n/**\n * Remove most spacing between table cells.\n */\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0;\n}"; }
      document.getElementById("ex2").onclick = function(){document.getElementById("css").value = '/** MiniMinifier test suite **/\n\n/* remove unnecessary spaces and semicolons */\n.test1 { color: #001 }                                   /* remove spaces around "{" and "}" */\n.test2 { color: #002; }                                  /* remove semicolon before "}" */\n.test3 { color: #003 ; background: #003 }                /* remove spaces around ";" */\n.test4 , .test4bis { color: #004 }                       /* remove spaces around "," */\n.test5 { color : #005 }                                  /* remove spaces around ":" */\n.test6 { color: #006 !important }                        /* remove spaces around "!" */\n.test7 + .test7bis { color: #007 }                       /* remove spaces around "+" */\n.test8 > .test8bis { color: #008 }                       /* remove spaces around ">" */\n.test9 ~ .test9bis { color: #009 }                       /* remove spaces around "~" */\n.test10 { background: url ( bg.jpg ) #010 }              /* remove spaces around "(" and ")" */\n.test11 { background: -moz-linear-gradient(#011, #011) } /* remove spaces around "-" */\n @media (print) { .test12 { color: #012 } }              /* remove spaces around "@" */\n\n/* optional: remove leading zeros */\n.test13 { border: 0.13em }\n\n/* Optional: remove unit after zero */\n.test14 {\n  width: 0px;\n  width: 0in;\n  width: 0cm;\n  width: 0mm;\n  width: 0em;\n  width: 0rem;\n  width: 0pt;\n  width: 0pc;\n  width: 0ex;\n  width: 0ch;\n  width: 0vw;\n  width: 0vh;\n  width: 0vmin;\n  width: 0vmax;\n  width: 0%\n}\n\n/* Optional: convert rgb in hexadecimal */\n.test15 { color: rgb(0, 11, 222); background: RGB(111, 22, 3) }\n\n/* Optional: minify haxadecimal colors */\n.test16 { color: #123456; background: #113355 }\n\n/* If both previous options are enabled: convert RGB to minified hexadecimal */\n.test17 { color: rgb(51, 102, 153) }\n\n/* Fix for old IE versions: add a space after some parenthesis */\n.test18 { background: url(bg.jpg) no-repeat }            /* applicable here */\n.test19 { background: url(bg.png); color: #019 }         /* not applicable before a ";" */\n.test19 { background: url(bg.png) }                      /* not applicable before a "}" */\n@media (print) { .test20 { color: #020 } }               /* not applicable before a "{" */'; }
      
      // Checkboxes
      var checkboxes = document.getElementsByTagName("input");
      
      // Iterator
      var i;
      
      // Handle clicks on checkboxes
      for(i = 0; i < checkboxes.length; i++){
        if(i > 0){
          checkboxes[i].checked = false;
        }
        checkboxes[i].addEventListener("click", updateMinifier);
      }
      
      function updateMinifier(){
        
        // Minifier code
        var code = "css=(function(c,r){\n  return c[r='replace'](/((\\/\\*[^]*?\\*\\/)|\\s)+/g,' ')[r](/^ | $|[ ;]*([{};,:!+>~\\(\\)-@]) */g,'$1')\n";
        var minicode = "c[r='replace'](/((\\/\\*[^]*?\\*\\/)|\\s)+/g,' ')[r](/^ | $|[ ;]*([{};,:!+>~\\(\\)-@]) */g,'$1')";
        
        // Zero
        if(checkboxes[1].checked){
          code += "          [r](/(\D)0\\./g,'$1.')\n";
          minicode += "[r](/(\D)0\\./g,'$1.')";
        }
        
        // Zero's unit
        if(checkboxes[2].checked){
          code += "          [r](/(\D)0([a-z%]+)/gi,'$10')\n";
          minicode += "[r](/(\D)0([a-z%]+)/gi,'$10')";
        }
        
        // RGB
        if(checkboxes[3].checked){
          code += "          [r](/rgb\\((\\d+),(\\d+),(\\d+)\\)/gi,function(h,a,b,c,i,p)\n            {h='#';p=[a,b,c];for(i in p)h+=('0'+parseInt(p[i]).toString(16)).slice(-2);return h})\n";
          minicode += "[r](/rgb\\((\\d+),(\\d+),(\\d+)\\)/gi,function(h,a,b,c,i,p){h='#';p=[a,b,c];for(i in p)h+=('0'+parseInt(p[i]).toString(16)).slice(-2);return h})";
        }
        
        // Hex
        if(checkboxes[4].checked){
          code += "          [r](/#[a-f0-9]{6}/gi,function(h,p){p=h[2]+h[4]+h[6];return p==h[1]+h[3]+h[5]?'#'+p:h})\n";
          minicode += "[r](/#[a-f0-9]{6}/gi,function(h,p){p=h[2]+h[4]+h[6];return p==h[1]+h[3]+h[5]?'#'+p:h})";
        }
        
        // IE
        if(checkboxes[5].checked){
          code += "          [r](/\\)(?![;{}])/g,') ')\n";
          minicode += "[r](/\\)(?![;{}])/g,') ')";
        }
        
        code += "})(css)";
        
        // Update
        document.getElementById("js").innerHTML = code;
        document.getElementById("bytes").innerHTML = "(" + minicode.length + " bytes)";
      }
      
      // Handle click on "Minify!"
      document.getElementsByTagName("button")[0].addEventListener("click", function(){
        var css = document.getElementById("css").value;

        var size = css.length;
        
        css = css.replace(/((\/\*[^]*?\*\/)|\s)+/g,' ')
                 .replace(/^ | $|[ ;]*([{};,:!+>~\(\)]) */g,'$1')
        
        // Zero
        if(checkboxes[1].checked){
          css = css.replace(/(\D)0\./g,'$1.');
        }
        
        // Zero's unit
        if(checkboxes[2].checked){
          css = css.replace(/(\D)0([a-z%]+)/gi,'$10')
        }
        
        // RGB
        if(checkboxes[3].checked){
          css = css.replace(/rgb\((\d+),(\d+),(\d+)\)/gi,function(h,a,b,c,i,p){h='#';p=[a,b,c];for(i in p)h+=('0'+parseInt(p[i]).toString(16)).slice(-2);return h})
        }
        
        // Hex
        if(checkboxes[4].checked){
          css = css.replace(/#[a-f0-9]{6}/gi,function(h,p){p=h[2]+h[4]+h[6];return p==h[1]+h[3]+h[5]?'#'+p:h})
        }
        
        // IE
        if(checkboxes[5].checked){
          css = css.replace(/\)(?![;{}])/g,') ')
        }
        
        // Update
        document.getElementById("css").value = css;
        var size2 = css.length;
        alert("Before: " + size + "Bytes. After: " + size2 + "Bytes. Saved: " + ((100 - Math.round(size2 / size * 100)) || 0) + "%.");
      })
    </script>
  </body>
</html>